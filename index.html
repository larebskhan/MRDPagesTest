<!--
  To Do:
	  1. JSON File
	  2. Review before submit
	  5. Remove button per input
    6. Email domain validation
-->
<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>MRD Form</title>

    <!-- Bootstrap CSS Styling-->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!--Include JS and CSS-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="interactionCode.js"></script>
    <script src="duplicate.js"></script>
    <script src="confirmation.js"></script>
    <link href="style.css" rel="stylesheet">
  </head>

  <body>
    <div id="boxForm">
      <div class="container">
        <!--<img src="https://abcnews4.com/resources/media/0f73c9b8-3b67-4aaf-b61c-5483a3192fb0-large16x9_BCBSSCPartner.png?1538141737266" alt="Photo" width=100">-->
        <h2>Monitoring Requirements Document Form &nbsp</h2>
        
        <form class="form-horizontal was-validated" name="mrdform" id="mrdform">
          <br>
          <p>
            <em><span class="star">&#42;</span> Indicates a required field</em>
          </p>

          <!--Confirmation Number-->
          <div hidden class="form-group">
            <label class="control-label col-sm-2" for="confirmationNum">Confirmation Number</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" id="confirmationNum" name="Confirmation Number">
            </div>
          </div>

          <!--Prereqs-->
	        <div class="form-group">
            <label class="control-label col-sm-2" for="assumptoins">Prerequisites&nbsp<span class="star">&#42;</span></label>
            <div class="col-sm-7">
              <input type="checkbox" id="assum1" required>
              <label for="assum1"> Servers/Appliances are active and available</label><br>
              <input type="checkbox" id="assum2" required>
              <label for="assum2"> The support team is prepared to accept tickets</label><br>
              <input type="input" class="form-control" id="ticketTeam_1" placeholder="Ticket Response Team" name="Ticket Response Team" required>
            </div>
          </div>

          <!--Objective Input-->
          <div class="form-group">
            <label class="control-label col-sm-2" for="mainObjective">Monitoring Objective&nbsp<span class="star">&#42;</span></label>
            <div class="col-sm-6">
              <a data-toggle="tooltip" title="Please enter the Objective of the project">
                <input type="text" class="form-control" id="mainObjective" placeholder="Ex. File Monitoring, File Up/Down Status" name="Monitoring Objective" required>
              </a>
            </div>
          </div>
          
	        <!--User ID-->
          <div class="form-group">
            <label class="control-label col-sm-2" for="userID">Employee ID&nbsp<span class="star">&#42;</span></label>
            <div class="col-sm-6">
              <a data-toggle="tooltip" title="Please enter your Employee ID">
                <input type="text" class="form-control" id="userID" placeholder="XXXX" name="Employee ID" required>
              </a>
            </div>
          </div>
		
	        <!--Project Title-->
	        <div class="form-group">
            <label class="control-label col-sm-2" for="projectTitle">Project Title&nbsp<span class="star">&#42;</span></label>
            <div class="col-sm-6">
              <a data-toggle="tooltip" title="Please enter the Project Title">
                <input type="text" class="form-control" id="projectTitle" placeholder="Project Title" name="Project Title" required>
              </a>
            </div>
          </div>
		
	        <!--Project Number-->
	        <div class="form-group">
            <label class="control-label col-sm-2" for="projectNumber">Project Number&nbsp<span class="star">&#42;</span></label>
            <div class="col-sm-6">
              <a data-toggle="tooltip" title="Please enter the Project Number">
                <input type="text" class="form-control" id="projectNumber" placeholder="Project Number" name="Project Number" required>
              </a>
            </div>
          </div>
		
	        <!--Project End Date-->
	        <div class="form-group">
            <label class="control-label col-sm-2" for="projectEndDate">Project End Date&nbsp<span class="star">&#42;</span></label>
            <div class="col-sm-6">
              <a data-toggle="tooltip" title="Please enter the Project End Date for this Monitoring">
                <input type="date" class="form-control" id="projectEndDate" placeholder="Project End Date" name="Project End Date" required>
              </a>
            </div>
          </div>
          
          <hr>
          <p>
            <em>Click on the requirements tab to input more data.</em>
          </p>

          <section id="req_1">
            <div class="panel-group">
              <div class="panel panel-default">
                <div class="panel-heading" style="background-color: #dbeaf35b;">
                  <div id="req">
                    <h4 class="panel-title">
                      <a id="toggle_1" data-toggle="collapse" href="#collapse_1"> Requirement 1</a>
                      <span class="star">&#42;</span>
                      <div class="triangle-down"></div>
                    </h4>
                    
                    <a data-toggle="tooltip" title="Please enter the Requirement(s) of the project">
                      <input type="text" class="form-control" id="requirements" placeholder="Ex. X should be monitored" name="Requirement 1" required>
                    </a>
                  </div>
                </div>

                <div id="collapse_1" class="panel-collapse collapse">
                  <ul class="list-group">

                    <li class="list-group-item">
                      <!--Buisiness Reason-->
                      <label for="reason">Business Reason&nbsp<span class="star">&#42;</span></label>
                      <a data-toggle="tooltip" title="Please enter the business reason.">
                        <input type="text" class="form-control" id="reason" placeholder="Ex. Utilization is too high, Application may crash" name="Business Reason 1" required>
                      </a>
                    </li>

                    <li class="list-group-item">
                      <!--Risk-->
                      <label for="risks">Risks of not Monitoring</label>
                      <br><em class='notRequired'>If no risks, leave input box blank.</em>
                      <input id="remRisk_1" type="button" class="btn btn-default" value="-" onclick="removeInputBox(this.id, 'riskInput')">
                      <input id="addRisk_1" type="button" class="btn btn-default" value="+" onclick="addInputBox(this.id, 'riskInput')">
                      <br><br>
                      <a id="riskInput_1" data-toggle="tooltip" title="Please enter any Risk(s) that pertain to the project">
                        <input type="text" class="form-control" id="risks" placeholder="Ex. Contractual Obligation, Financial Risk, Customer Impact" name="Risk 1">
                        <span class="help-block"></span>
                        <div id='addedriskInput_1'>
                              
                        </div>
                      </a> 
                      <!--<label>
                        <input type="checkbox" name="No Risks" id="none_risks_1" onclick="riskDisable(this.id)"> 
                        None 
                      </label>-->
                    </li>

                    <li class="list-group-item">
                      <!--Servers-->
                      <label for="requirement">Servers &nbsp<span class="star">&#42;</span> </label><br>
                      <input id="remServer_1" type="button" class="btn btn-default" value="-" onclick="removeInputBox(this.id, 'serverInput')">
                      <input id="addServer_1" type="button" class="btn btn-default" value="+" onclick="addInputBox(this.id, 'serverInput')">

                      <!--Server Type buttons-->
                      <input class="form-check-input" type="radio" name="Server Type 1" id="windows" value="Windows"> <!-- onclick="--> 
                      <label for="ticketAlert">Windows</label><br>
                      <input class="form-check-input" type="radio" name="Server Type 1" id="linux" value="Linux"> <!-- onclick=" -->
                      <label for="emailAlert">Linux</label><br>
                      <input class="form-check-input" type="radio" checked="checked" name="Server Type 1" id="bothServers" value="Both"> <!-- onclick=" -->  
                      <label for="bothAlert">Both</label><br>
                      <div class="" id="serverWarning">
                        <div id="serverInput_1">
                          <a data-toggle="tooltip" title="Please enter all ServerIDs">
                            <input type="text" class="form-control" oninput="serverWarning(this.id)" id="server" placeholder="Server ID" name="Server ID 1">
                            <span class="help-block" id="serverWarningText"></span>
                            <div id='addedserverInput_1'>

                            </div>
                          </a>
                        </div>
                      </div>
                    </li>

                    <li class="list-group-item">
                      <!--File Monitoring-->
                      <label for="files">File Monitoring?</label>
                      <br><em class='notRequired'>If no file monitoring, leave input box blank.</em>
                      <input id="remFile_1" type="button" class="btn btn-default" value="-" onclick="removeInputBox(this.id, 'fileInput')">
                      <input id="addFile_1" type="button" class="btn btn-default" value="+" onclick="addInputBox(this.id, 'fileInput')">
                      <br>
                      <!--<input class="form-check-input" type="radio" name="fileMonitoring" checked="checked" id="yesFile_1" value="Yes" onclick="fileInput('yes', this.id)">
                      <label for="yesFile">Yes</label><br>
                      <input class="form-check-input" type="radio" name="fileMonitoring" id="noFile_1" value="No" onclick="fileInput('no', this.id)">
                      <label for="yesFile">No</label><br>-->
                      <a id="fileInput_1" data-toggle="tooltip" title="Please enter the Complete File Path">
                        <input type="text" class="form-control" id="files" placeholder="Ex. D:\Program Files\MyApplication\Logs\" name="File Path 1"> <span class="help-block"></span>
                        <div id='addedfileInput_1'>
                              
                        </div>
                      </a>
                    </li>
			  
		                <li class="list-group-item">
                      <!--Alerts-->
                      <label for="alert">Alerting&nbsp<span class="star">&#42;</span></label><br>
                      <p>
                        <em style="position: relative; right: 26%;" class='notRequired'> Note: For servers, the only required field is ticket severity.</em>
                      </p>
                      <input id="remEmail_1" type="button" class="btn btn-default" value="-" onclick="removeInputBox(this.id, 'emailInput')">
                      <input id="addEmail_1" type="button" class="btn btn-default" value="+" onclick="addInputBox(this.id, 'emailInput')">
                      
                      <input type="input" class="form-control" id="searchSched_1" placeholder="Search Schedule: Ex. Every 10 minutes" name="Search Schedule 1"><span class="help-block"></span>

                      <input class="form-check-input" type="radio" name="Alert 1" id="ticketAlert_1" value="Ticket" onclick="alertingInput('ticket', this.id)">
                      <label for="ticketAlert">Ticket</label><br>
                      <input class="form-check-input" type="radio" name="Alert 1" id="emailAlert_1" value="Email" onclick="alertingInput('email', this.id)">
                      <label for="emailAlert">Email</label><br>
                      <input class="form-check-input" type="radio" checked="checked" name="Alert 1" id="bothAlert_1" value="Both" onclick="alertingInput('both', this.id)">
                      <label for="bothAlert">Both</label><br>
                      
                      <div id="ticketAlert">
                        
                        <select id="ticket_1" class="form-control" aria-label=".form-select-sm example" name="Ticket Severity 1">
                          <option disabled selected value> -- Select Severity -- </option>
                          <option value="S1">S1</option>
                          <option value="S2">S2</option>
                          <option value="S3">S3</option>
                          <option value="TBD">TBD</option>
                        </select><span class="help-block" id="serverWarningText"></span>
			                  <input type="input" class="form-control" id="ticketCircum_1" placeholder="Ticketing Condition" name="Ticketing Condition 1"><span class="help-block" id="serverWarningText"></span>
                        <input type="input" class="form-control" id="ticketBucket_1" placeholder="Ticket Bucket" name="Ticket Bucket 1"><span class="help-block" id="serverWarningText"></span>
                      </div>
                      <br>
                      <div id="emailAlert">

                        <a id="emailInput_1" data-toggle="tooltip" title="Please enter the Distribution List">
                          <input type="email" class="form-control" id="email" placeholder="Distribution List" name="Distribution List 1" 
                          pattern=".+@bcbssc.com|.+@paisc.com|.+@cgifederal.com|.+@palmettogba.com|.+@palmettogbaservices.com|.+@companiondataservices.com|.+@cdsedc.com|.+@ngc.com|.+@cgsadmin.com|.+@docfinity.com|.+@a70amed.com"  
                          oninvalid="this.setCustomValidity('Please enter your email address with one of the following domains from below')" 
                          onchange="this.setCustomValidity('')" required>
                          <span class="help-block"></span>
                          <div id='addedemailInput_1'>
                              
                          </div>
                        </a>
                        <div id='emailDomain_1'>
                          <button style="position: relative; right: 58%;" type="button" id='domainButton_1' class="btn btn-default" data-toggle="collapse" data-target="#domains_1">Click to see acceptable email domains</button>
                          <br><br>
                          <div id="domains_1" class="collapse">
                            @bcbssc.com<br>
                            @paisc.com<br>
                            @cgifederal.com<br>
                            @palmettogba.com<br>
                            @palmettogbaservices.com<br>
                            @companiondataservices.com<br>
                            @cdsedc.com<br>
                            @ngc.com<br>
                            @cgsadmin.com<br>
                            @docfinity.com<br>
                            @a70amed.com
                          </div>
                        </div>
                      </div>

                      <p>
                        <em class="notRequired">If no alerting is required, <a href="http://a70lpcrpcapm009/isWiki/index.php?title=Add_Data_to_Splunk" target="_blank"> click here!</a></em>
                      </p>
                    </li>

                    <!--
                      Objective
                      <label for="objective">Objective&nbsp<span class="star">&#42;</span> </label>
                      <a data-toggle="tooltip" title="Please enter the Objective for each Requirement">
                        <input type="text" class="form-control" id="objective" placeholder="Requirement Objective" name="Objective" required>
                      </a>
                      <br>
                    -->

                    <!--
                    Assumptions
                    <label for="assumptions">Assumption(s)&nbsp<span class="star">&#42;</span></label>
                    <input id="remAssumption_1" type="button" class="btn btn-default" value="-">
                    <input id="addAssumption_1" type="button" class="btn btn-default" value="+">
                    <br><br>
                    <a id="assumptionInput_1_1" data-toggle="tooltip" title="Please enter any Assumption(s) for the project">
                      <input type="text" class="form-control" id="assumptions" placeholder="Project Assumption" name="Assumption(s)" required>
                    </a>
                    <label><input type="checkbox" name="No Assumptions" id="none_assumptions" onclick="disableInput('assumptions', 'Project Assumption'); removeAll('Assumption');"> None </label>
                        
                  <br><br>
                    -->

                    <li class="list-group-item">
                      <!--Acceptance Criteria-->
                      <label for="acceptanceCrit">Acceptance Criteria&nbsp<span class="star">&#42;</span></label>
                      <p>
                        <em style="position: relative; right: 32%" class='notRequired'> Acceptance Criteria should be measurable</em>
                      </p>
                      <input id="remAcc_1" type="button" class="btn btn-default" value="-" onclick="removeInputBox(this.id, 'accInput')">
                      <input id="addAcc_1"type="button" class="btn btn-default" value="+" onclick="addInputBox(this.id, 'accInput')">
                      <br><br>
                      
                      <a id="accInput_1" data-toggle="tooltip" title="Please enter all Acceptance Criteria for the project">
                        <input type="text" class="form-control" id="acceptanceCrit" placeholder="Acceptance Criteria" name="Acceptance Criteria 1" required>
                        <span class="help-block"></span>
                        <div id='addedaccInput_1'>
                              
                        </div>
                      </a>
                    </li>

                    <li class="list-group-item">
                      <!--Additional Information-->
                      <label for="addInfo">Additional Information</label>
                      <br><em class='notRequired'>If no additional information, leave input box blank.</em>
                      <input id="remAdd_1" type="button" class="btn btn-default" value="-" onclick="removeInputBox(this.id, 'addInput')">
                      <input id="addAdd_1"type="button" class="btn btn-default" value="+" onclick="addInputBox(this.id, 'addInput')">
                      <br><br>
                      <a id="addInput_1" data-toggle="tooltip" title="Please enter any additional information for the project">
                        <input type="text" class="form-control" id="addInfo" placeholder="Additional Information" name="Additional Information 1">
                        <span class="help-block"></span>
                        <div id='addedaddInput_1'>
                              
                        </div>
                      </a>
                    </li>

                  </ul>
                </div>
              </div>
            </div>
          </section>

          <input id="remReq" type="button" class="btn btn-default" value="- Delete Requirement">
          <span>&nbsp</span>
          <input id="addReq" type="button" class="btn btn-default" value="+ Add Requirement">

          <hr>
          
          <button type="submit" class="btn btn-default" onclick="return confirm('Are you sure you want to submit?')">Submit</button>
          
        </form>
        
        <script src="dataHandling.js"></script>
      </div>
    </div>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Attempt to fix JSON file output, make array of requirements (BROKEN)-->
        <!--
          <div class="formBox">
            <button id="btnnn" type="button">Click to Add</button>
        </div>

        <script>
          let reqs = [];
          const addReq = (ev)=>{
            alert("Hello! I am an alert box!");
            //ev.preventDefault();  //to stop the form submitting
            let req = {
                Requirement: document.getElementById('requirements').value,
                Business Reason: document.getElementById('reason').value,
                Risk(s): document.getElementById('risks').value,
                Server Type: document.getElementById('bothServers').value,
                Server ID(s): document.getElementById('server').value,
                File Path: document.getElementById('files').value,
                Alert: document.getElementById('both').value,
                Ticketing Circumstance: document.getElementById('ticketCircum_1').value,
                Ticketing Severity:document.getElementById('ticket_1').value,
                Ticket Bucket:document.getElementById('ticketBucket_1').value,
                Ticket Response Team:document.getElementById('ticketTeam_1').value,
                Distributor:document.getElementById('email').value,
                Acceptance Criteria:document.getElementById('accInput_1').value,
                Additional Information:document.getElementById('addInput_1').value

            }
            reqs.push(req);
            document.forms[0].reset(); // to clear the form for the next entries
            //document.querySelector('form').reset();

            //for display purposes only
            console.warn('added' , {reqs} );
            let pre = document.querySelector('#msg pre');
            pre.textContent = '\n' + JSON.stringify(reqs, '\t', 2);
            
            //saving to localStorage
            localStorage.setItem('MyReqList', JSON.stringify(reqs) );
        }
        document.addEventListener('DOMContentLoaded', ()=>{
            document.getElementById('btnnn').addEventListener('click', addReq);
        });
    </script>
    -->
    
  </body>
</html>
